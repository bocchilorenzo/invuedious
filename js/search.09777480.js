"use strict";(self["webpackChunkinvuedious"]=self["webpackChunkinvuedious"]||[]).push([[464],{687:function(t,e,a){a.d(e,{Z:function(){return A}});var i=a(252);const n={class:"columns"};function s(t,e,a,s,o,r){const d=(0,i.up)("roundedCard");return(0,i.wg)(),(0,i.iD)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.dataArray,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.authorId,class:"column col-xs-12 col-sm-6 col-md-3 col-2"},[(0,i.Wm)(d,{channelData:t,mode:a.mode},null,8,["channelData","mode"])])))),128))])}var o=a(577);const r=t=>((0,i.dD)("data-v-58f1f0fb"),t=t(),(0,i.Cn)(),t),d={class:"card"},l={class:"card-image"},c=["src","alt"],h={class:"card-header"},u={class:"card-title h6"},m={class:"card-subtitle text-gray"},g={key:0,class:"card-body"},p=r((()=>(0,i._)("br",null,null,-1)));function v(t,e,a,n,s,r){const v=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(v,{to:{name:"channel",path:"/channel/:id",params:{id:a.channelData.authorId},props:!0}},{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i._)("img",{src:a.channelData.authorThumbnails[2].url,class:"img-responsive",alt:a.channelData.author},null,8,c)])])),_:1},8,["to"]),(0,i._)("div",h,[(0,i.Wm)(v,{to:{name:"channel",path:"/channel/:id",params:{id:a.channelData.authorId},props:!0}},{default:(0,i.w5)((()=>[(0,i._)("div",u,(0,o.zw)(a.channelData.author),1)])),_:1},8,["to"]),(0,i._)("div",m,(0,o.zw)(a.channelData.description),1)]),"channelInfo"!=a.mode?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Uk)(" Subscribers: "+(0,o.zw)(a.channelData.formattedSubs)+" ",1),p,(0,i.Uk)(" Videos: "+(0,o.zw)(a.channelData.videoCount),1)])):(0,i.kq)("",!0)])}var y={name:"roundedCard",props:{channelData:Object,mode:String}},f=a(744);const b=(0,f.Z)(y,[["render",v],["__scopeId","data-v-58f1f0fb"]]);var w=b,D={name:"roundedCardContainer",props:{dataArray:Array,mode:String},components:{roundedCard:w}};const k=(0,f.Z)(D,[["render",s]]);var A=k},404:function(t,e,a){a.r(e),a.d(e,{default:function(){return E}});var i=a(252);const n={class:"tab tab-block"},s={class:"tab-item",id:"tab1"},o={class:"tab-item",id:"tab2"},r={class:"container2"},d={key:0,class:"loading loading-lg"},l={key:1},c={key:0},h={class:"empty"},u={class:"empty-icon"},m=(0,i._)("p",{class:"empty-title h5"},"Connection error",-1),g=(0,i._)("p",{class:"empty-subtitle"},[(0,i.Uk)(" The request to the indvidious instance took too long. "),(0,i._)("br"),(0,i.Uk)("Check your connection and try again. ")],-1),p={class:"empty-action"},v={key:1},y={key:0},f={class:"empty"},b={class:"empty-icon"},w=(0,i._)("p",{class:"empty-title h5"},"No results found",-1),D={key:1},k={key:2,class:"loading loading-lg"};function A(t,e,a,A,C,_){const V=(0,i.up)("unicon"),I=(0,i.up)("router-link"),q=(0,i.up)("cardContainer"),S=(0,i.up)("roundedCardContainer");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("ul",n,[(0,i._)("li",s,[(0,i.Wm)(I,{to:{name:"searchVideo",params:{q:C.query}}},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{name:"video",fill:"var(--primary)"}),(0,i.Uk)("VIDEOS ")])),_:1},8,["to"])]),(0,i._)("li",o,[(0,i.Wm)(I,{to:{name:"searchChannel",params:{q:C.query}}},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{name:"tv-retro",fill:"var(--primary)"}),(0,i.Uk)("CHANNELS ")])),_:1},8,["to"])])]),(0,i._)("div",r,[C.loading?((0,i.wg)(),(0,i.iD)("div",d)):((0,i.wg)(),(0,i.iD)("div",l,[C.failed?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",h,[(0,i._)("div",u,[(0,i.Wm)(V,{name:"sad-dizzy",fill:"var(--primary)",width:"50px",height:"50px"})]),m,g,(0,i._)("div",p,[(0,i._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=t=>_.reconnect())}," RETRY ")])])])):((0,i.wg)(),(0,i.iD)("div",v,[0==C.dataArray.length?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("div",f,[(0,i._)("div",b,[(0,i.Wm)(V,{name:"frown",fill:"var(--primary)",width:"50px",height:"50px"})]),w])])):((0,i.wg)(),(0,i.iD)("div",D,["searchVideo"==C.mode?((0,i.wg)(),(0,i.j4)(q,{key:0,videoArray:C.dataArray},null,8,["videoArray"])):((0,i.wg)(),(0,i.j4)(S,{key:1,dataArray:C.dataArray},null,8,["dataArray"])),C.stop?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",k))]))]))]))])])}var C=a(686),_=a(687),V=a(77),I={name:"searchPage",components:{cardContainer:C.Z,roundedCardContainer:_.Z},props:{reload:Boolean},data(){return{dataArray:[],loading:!0,query:this.$route.params.q,mode:this.$route.name,page:1,bottom:!1,failed:!1,stop:!1}},mounted(){this.checkActive()},created(){document.title=this.query+" - Invuedious","searchVideo"==this.mode?this.getVideoData():this.getChannelsData(),window.addEventListener("scroll",(()=>{this.bottom=this.bottomVisible()}))},unmounted(){window.removeEventListener("scroll",(()=>{this.bottom=this.bottomVisible()}))},methods:{checkActive(){"searchVideo"==this.$route.name?(document.getElementById("tab1").classList.add("active"),document.getElementById("tab2").classList.remove("active")):(document.getElementById("tab2").classList.add("active"),document.getElementById("tab1").classList.remove("active"))},reconnect(){this.loading=!0,this.failed=!1,this.getVideoData()},bottomVisible(){const t=window.scrollY,e=document.documentElement.clientHeight,a=document.documentElement.scrollHeight-400,i=e+t>=a;return i||a<e},async getVideoData(){var t=this.$store.state.selected+"/api/v1/search?q="+this.query+"&page="+this.page;await fetch(t,{signal:AbortSignal.timeout(1e4)}).then((t=>t.json())).then((t=>{if(!this.stop){let a={},i=!1;for(let n=0;n<t.length;n++){if(a=t[n],a.formattedViews=V(t[n].viewCount).format("0a"),"m"==a.formattedViews.charAt(a.formattedViews.length-1)){var e=a.formattedViews.substr(0,a.formattedViews.length-1)+"M";a.formattedViews=e}a.formattedViews+=" views",i=this.checkDouble(t[n].videoId,"video"),0==i&&t[n].videoId&&this.dataArray.push(a)}t.length<19&&(this.stop=!0)}})).catch((()=>{this.failed=!0})).then((()=>this.page+=1)).then((()=>this.loading=!1)).then((()=>{2==this.page&&this.getVideoData()}))},async getChannelsData(){var t=this.$store.state.selected+"/api/v1/search?q="+this.query+"&type=channel&page="+this.page;await fetch(t,{signal:AbortSignal.timeout(1e4)}).then((t=>t.json())).then((t=>{if(!this.stop){let a={},i=!1;for(let n=0;n<t.length;n++){if(a=t[n],a.formattedSubs=V(t[n].subCount).format("0a"),"m"==a.formattedSubs.charAt(a.formattedSubs.length-1)){var e=a.formattedSubs.substr(0,a.formattedSubs.length-1)+"M";a.formattedSubs=e}i=this.checkDouble(t[n].authorId,"channel"),0==i&&this.dataArray.push(a)}t.length<20&&(this.stop=!0)}})).catch((()=>{this.failed=!0})).then((()=>this.page+=1)).then((()=>this.loading=!1)).then((()=>{2==this.page&&this.getChannelsData()}))},checkDouble(t,e){for(var a=!1,i=0;i<this.dataArray.length;i++)null!=this.dataArray&&void 0!=this.dataArray[i]&&("video"==e?this.dataArray[i].videoId==t&&(a=!0):this.dataArray[i].authorId==t&&(a=!0));return a}},watch:{reload(){this.reload&&(this.loading=!0,this.dataArray=[],this.page=1,this.bottom=!1,this.failed=!1,this.stop=!1,this.reconnect())},bottom(t){t&&!this.loading&&("searchVideo"==this.mode?this.getVideoData():this.getChannelsData())}}},q=a(744);const S=(0,q.Z)(I,[["render",A]]);var E=S}}]);
//# sourceMappingURL=search.09777480.js.map